---
author: mxtao
date: 2020-03-10
---

# Category: The Essence of Composition

[Link to Blog](https://bartoszmilewski.com/2014/11/04/category-the-essence-of-composition/)

[<译> 范畴：复合的本质](https://segmentfault.com/a/1190000003883257)

A category consists of *objects* and *arrows* that go between them.

## Arrows as Functions

Arrows also called *morphisms*, as functions. 

```haskell
f :: A -> B
g :: B -> C

g . f :: A -> C
```

$g \circ f$ = $\lambda x.g \lparen f \lparen x \rparen \rparen$

## Properties of Composition

1. Composition is associative. 

    $h \circ \lparen g \circ f \rparen$ = $\lparen h \circ g \rparen \circ f$ = $h \circ g \circ f$

    ```haskell
    f :: A -> B
    g :: B -> C
    h :: C -> D

    -- equality is not defined for functions
    h . (g . f) == (h . g) . f == h . g . f
    ```

2. For every object *A* there is an arrow which is a unit of composition.

    This arrow loops from the object to itself. The unit arrow for object A is called $\bold{id} _{A}$ (*identity* on $A$).

    In math notation, if $f$ goes from $A$ to $B$, then $f \circ \bold{id} _A = f$ and $\bold{id} _B \circ f = f$

    ```haskell
    id :: a -> a
    id x = x

    f . id == f
    id . f == f
    ```

A category consists of objects and arrows (morphisms). Arrows can be composed, and the composition is associative. Every object has an identity arrow that servers as unit under composition.

## Composition is the Essence of Programming

## Challenges

1. Implement the identity function

    ```fsharp
    // there is an `id` in F#
    let idm x = x
    ```

2. Implement the composition function
    
    ```fsharp
    // right to left
    let compose g f x = g(f(x))

    // in F#, there is an `>>` , compose functions left to right
    let compose f g x = g(f(x))
    ```

3. test composition function

    ```fsharp
    let f (i: int): string = string i

    compose idm f

    compose f idm
    ```

